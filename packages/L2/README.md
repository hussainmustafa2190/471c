Moving from L3 to L2 is our first real step into the lowering process. At first glance, L2 looks almost exactly like L3, but we’ve made one major simplification: we completely deleted LetRec. This might seem like a small change, but it’s actually a huge deal for the compiler. By removing LetRec, we are stripping away the language’s builtin ability to handle selfreferential definitions. We’ve simplified the syntax by making the environment more rigid—now, a name can generally only refer to something that has already been defined.

This simplification forces a massive elaboration in how we handle recursion. Since the language no longer supports LetRec natively, we have to elaborate recursive logic using only the basic Let and Abstract tools. We are essentially trading a complex language feature for a more complex implementation strategy. By making the language simpler (getting rid of a specific tag), we make the job of the next compiler pass more explicit and predictable.